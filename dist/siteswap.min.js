(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Siteswap = f()}})(function(){var define,module,exports;module={exports:(exports={})};
"use strict";function a(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?a:c}function c(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function r(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function l(a){if(Array.isArray(a)){for(var c=0,r=Array(a.length);c<a.length;c++)r[c]=a[c];return r}return Array.from(a)}function o(a,c){if(a.length!==c.length)return!1;for(var r=0;r<a.length;r++){var l=a[r],o=c[r];if(l.length!==o.length)return!1;for(var s=0;s<l.length;s++){var n=l[s],$=o[s];if(n.length!==$.length)return!1;for(var e=0;e<n.length;e++){var t=n[e],m=$[e];if(t.value!==m.value||t.handFrom!==m.handFrom||t.handTo!==m.handTo)return!1}}}return!0}function Toss(a,c,r){this.value=a,this.handFrom=c,this.handTo=r}function s(a,c,r,l,o){var n=r[l][o],$=!0,e=!1,t=void 0;try{for(var m,i=n[Symbol.iterator]();!($=(m=i.next()).done);$=!0){var d=m.value;if(0!==d.value){var y=(l+d.value)%r.length;c[y][d.handTo]!==a&&(c[y][d.handTo]=a,s(a,c,r,y,d.handTo))}}}catch(a){e=!0,t=a}finally{try{!$&&i.return&&i.return()}finally{if(e)throw t}}}function n(a,c,r){return this.id=++n.highestId,this.name=a,this.symbols=c,this.postprocess=r,this}function $(a,c,r,l){this.rule=a,this.dot=c,this.reference=r,this.data=[],this.wantedBy=l,this.isComplete=this.dot===a.symbols.length}function e(a,c){this.grammar=a,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}function t(a,c){this.rules=a,this.start=c||this.rules[0].name;var r=this.byName={};this.rules.forEach(function(a){r.hasOwnProperty(a.name)||(r[a.name]=[]),r[a.name].push(a)})}function m(){this.reset("")}function i(a,c,r){if(a instanceof t)var l=a,r=c;else l=t.fromCompiled(a,c);this.grammar=l,this.options={keepHistory:!1,lexer:l.lexer||new m};for(var o in r||{})this.options[o]=r[o];this.lexer=this.options.lexer,this.lexerState=void 0;var s=new e(l,0);this.table=[s];s.wants[l.start]=[],s.predict(l.start),s.process(),this.current=0}function d(a){return a[0]}function y(a){return a.concat(a.map(function(a){return a.map(function(a){return a.map(function(a){return{value:a.value,cross:a.cross}})}).reverse()}))}function u(a){return a<"a"?a.charCodeAt(0)-"A".charCodeAt(0)+36:a.charCodeAt(0)-"a".charCodeAt(0)+10}function p(a){return a.map(function(a){return[j(a,1)[0].map(function(a){return{value:a.value,handFrom:0,handTo:0}})]})}function f(a){return a.map(function(a){return a.map(function(a,c){return a.map(function(a){var r=a.value,l=a.cross;return{value:r/2,handFrom:c,handTo:l?1-c:c}})})})}function h(a,c){try{return new i(A.ParserRules,a).feed(c).results}catch(a){return[]}}function b(a){return 2*a.value+(a.handFrom!==a.handTo?"x":"")}function _(a){return 2*a.value+(a.handFrom!==a.handTo?"x":"")}function v(a){if(!Array.isArray(a)||!a.length)return!1;var c=!0,r=!1,l=void 0;try{for(var o,s=a[Symbol.iterator]();!(c=(o=s.next()).done);c=!0){var n=o.value;if(!Array.isArray(n)||n.length!==a[0].length)return!1;if(n.some(function(a){return!Array.isArray(a)||!a.every(function(a){var c=a.value,r=a.handFrom,l=a.handTo;return void 0!==c&&void 0!==r&&void 0!==l})}))return!1}}catch(a){r=!0,l=a}finally{try{!c&&s.return&&s.return()}finally{if(r)throw l}}return!0}function g(a){var c="A".charCodeAt(0),r="Z".charCodeAt(0)-c+1;return x(a).map(function(a,l){return x(Math.floor(l/r)).map(function(a){return String.fromCharCode(c+a%r)}).concat(String.fromCharCode(c+l%r)).join("")})}function x(a){return[].concat(l(Array(a).keys()))}function w(a,c){return"string"!=typeof a&&(a=a.toString()),c++,a.length>=c?a:""+Array(c-a.length).join(" ")+a}var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j=function(){function a(a,c){var r=[],l=!0,o=!1,s=void 0;try{for(var n,$=a[Symbol.iterator]();!(l=(n=$.next()).done)&&(r.push(n.value),!c||r.length!==c);l=!0);}catch(a){o=!0,s=a}finally{try{!l&&$.return&&$.return()}finally{if(o)throw s}}return r}return function(c,r){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return a(c,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),State=function State(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,State);var l=void 0;if(a instanceof Array)l=a;else{if(!(a instanceof Siteswap))throw new Error("Invalid input.");l=[];for(var o=a,s=0;s<o.degree;s++){for(var n=[],$=0;$<o.greatestValue;$++)n.push(c?[]:0);l.push(n)}for(var e=0,t=-1;e<o.props;t--){var m=o.throws[(t%o.throws.length+o.throws.length)%o.throws.length],i=!0,d=!1,y=void 0;try{for(var u,p=m[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var f=u.value,h=!0,b=!1,_=void 0;try{for(var v,g=f[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var x=v.value;t+x.value>=0&&(c?l[x.handTo][t+x.value].push(e):l[x.handTo][t+x.value]++,e++)}}catch(a){b=!0,_=a}finally{try{!h&&g.return&&g.return()}finally{if(b)throw _}}}}catch(a){d=!0,y=a}finally{try{!i&&p.return&&p.return()}finally{if(d)throw y}}}}this.schedule=l,this.strict=c,this.ground=!this.isExcited()};State.prototype.advance=function(a){if(0===this.schedule[0].length)return this;var c=[];this.strict?c.push.apply(c,l(this.schedule.map(function(a){return[].concat(l(a.slice(1).map(function(a){return a.slice()})),[[]])}))):c.push.apply(c,l(this.schedule.map(function(a){return[].concat(l(a.slice(1)),[0])})));var r=!0,o=!1,s=void 0;try{for(var n,$=a[Symbol.iterator]();!(r=(n=$.next()).done);r=!0)for(var e=n.value,t=0;t<e.length;t++){var m=e[t];if(m.value>0)if(this.strict){var i=this.schedule[m.handFrom][0][t];c[m.handTo][m.value-1].push(i)}else c[m.handTo][m.value-1]++}}catch(a){o=!0,s=a}finally{try{!r&&$.return&&$.return()}finally{if(o)throw s}}return new State(c,this.strict)},State.prototype.equals=function(a){if(this.strict!==a.strict)return!1;var c=this.schedule,r=a.schedule;if(c.length!==r.length)return!1;for(var l=0;l<c.length;l++){if(c[l].length!==r[l].length)return!1;for(var o=0;o<c[l].length;o++)if(this.strict){if(c[l][o].length!==r[l][o].length)return!1;for(var s=0;s<c[l][o].length;s++)if(c[l][o][s]!==r[l][o][s])return!1}else if(c[l][o]!==r[l][o])return!1}return!0},State.prototype.isExcited=function(){this.schedule;var a=void 0;a=this.strict?this.schedule.reduce(function(a,c){return a+c.reduce(function(a,c){return a+c.length},0)},0):this.schedule.reduce(function(a,c){return a+c.reduce(function(a,c){return a+c},0)},0);var c=this.schedule.length,r=this.schedule[0].length,l=Math.floor(a/c),o=a%c;if(this.strict)for(var s=0;s<c;s++){for(var n=0;n<l;n++)if(1!==this.schedule[s][n].length)return!0;if(l!==r){for(var $=1===this.schedule[s][l].length?1:0,e=l+$;e<r;e++)if(0!==this.schedule[s][e].length)return!0;o-=$}}else for(var t=0;t<c;t++){for(var m=0;m<l;m++)if(1!==this.schedule[t][m])return!0;for(var i=1===this.schedule[t][l]?1:0,d=l+i;d<r;d++)if(0!==this.schedule[t][d])return!0;o-=i}return 0!==o},n.highestId=0,n.prototype.toString=function(a){function c(a){return a.literal?JSON.stringify(a.literal):a.type?"%"+a.type:a.toString()}var r=void 0===a?this.symbols.map(c).join(" "):this.symbols.slice(0,a).map(c).join(" ")+" ● "+this.symbols.slice(a).map(c).join(" ");return this.name+" → "+r},$.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},$.prototype.nextState=function(a){var c=new $(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=a,c.isComplete&&(c.data=c.build()),c},$.prototype.build=function(){var a=[],c=this;do{a.push(c.right.data),c=c.left}while(c.left);return a.reverse(),a},$.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,i.fail))},e.prototype.process=function(a){for(var c=this.states,r=this.wants,l=this.completed,o=0;o<c.length;o++){var s=c[o];if(s.isComplete){if(s.finish(),s.data!==i.fail){for(var n=s.wantedBy,$=n.length;$--;){var e=n[$];this.complete(e,s)}if(s.reference===this.index){var t=s.rule.name;(this.completed[t]=this.completed[t]||[]).push(s)}}}else{if("string"!=typeof(t=s.rule.symbols[s.dot])){this.scannable.push(s);continue}if(r[t]){if(r[t].push(s),l.hasOwnProperty(t))for(var m=l[t],$=0;$<m.length;$++){var d=m[$];this.complete(s,d)}}else r[t]=[s],this.predict(t)}}},e.prototype.predict=function(a){for(var c=this.grammar.byName[a]||[],r=0;r<c.length;r++){var l=c[r],o=this.wants[a],s=new $(l,0,this.index,o);this.states.push(s)}},e.prototype.complete=function(a,c){var r=c.rule.name;if(a.rule.symbols[a.dot]===r){var l=a.nextState(c);this.states.push(l)}},t.fromCompiled=function(a,c){var r=a.Lexer;a.ParserStart&&(c=a.ParserStart,a=a.ParserRules);var l=new t(a=a.map(function(a){return new n(a.name,a.symbols,a.postprocess)}),c);return l.lexer=r,l},m.prototype.reset=function(a,c){this.buffer=a,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},m.prototype.next=function(){if(this.index<this.buffer.length){var a=this.buffer[this.index++];return"\n"===a&&(this.line+=1,this.lastLineBreak=this.index),{value:a}}},m.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},m.prototype.formatError=function(a,c){var r=this.buffer;if("string"==typeof r){var l=r.indexOf("\n",this.index);-1===l&&(l=r.length);var o=r.substring(this.lastLineBreak,l),s=this.index-this.lastLineBreak;return c+=" at line "+this.line+" col "+s+":\n\n",c+="  "+o+"\n",c+="  "+Array(s).join(" ")+"^"}return c+" at index "+(this.index-1)},i.fail={},i.prototype.feed=function(a){var c=this.lexer;c.reset(a,this.lexerState);for(var r;r=c.next();){var l=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var o=this.current+1,s=new e(this.grammar,o);this.table.push(s);for(var n=r.value,$=c.constructor===m?r.value:r,t=l.scannable,i=t.length;i--;){var d=t[i],y=d.rule.symbols[d.dot];if(y.test?y.test($):y.type?y.type===r.type:y.literal===n){var u=d.nextState({data:$,token:r,isToken:!0,reference:o-1});s.states.push(u)}}if(s.process(),0===s.states.length){var p=this.lexer.formatError(r,"invalid syntax")+"\n";p+="Unexpected "+(r.type?r.type+" token: ":""),p+=JSON.stringify(void 0!==r.value?r.value:r)+"\n";var f=new Error(p);throw f.offset=this.current,f.token=r,f}this.options.keepHistory&&(l.lexerState=c.save()),this.current++}return l&&(this.lexerState=c.save()),this.results=this.finish(),this},i.prototype.save=function(){var a=this.table[this.current];return a.lexerState=this.lexerState,a},i.prototype.restore=function(a){var c=a.index;this.current=c,this.table[c]=a,this.table.splice(c+1),this.lexerState=a.lexerState,this.results=this.finish()},i.prototype.rewind=function(a){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[a])},i.prototype.finish=function(){var a=[],c=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(r){r.rule.name===c&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==i.fail&&a.push(r)}),a.map(function(a){return a.data})};var A={Lexer:void 0,ParserRules:[{name:"digit",symbols:[/[0-9]/],postprocess:function(a){var c=j(a,1)[0];return Number(c)}},{name:"digit_even",symbols:[/[02468]/],postprocess:function(a){var c=j(a,1)[0];return Number(c)}},{name:"letter",symbols:[/[a-zA-Z]/],postprocess:d},{name:"letter_even",symbols:[/[acegikmoqsuwyACEGIKMOQSUWY]/],postprocess:d},{name:"integer",symbols:[/[0-9]/],postprocess:function(a){var c=j(a,1)[0];return Number(c)}},{name:"integer$ebnf$1",symbols:[/[0-9]/]},{name:"integer$ebnf$1",symbols:["integer$ebnf$1",/[0-9]/],postprocess:function(a){return a[0].concat([a[1]])}},{name:"integer",symbols:[/[1-9]/,"integer$ebnf$1"],postprocess:function(a){var c=j(a,2),r=c[0],o=c[1];return Number([r].concat(l(o)).join(""))}},{name:"integer_even",symbols:[/[02468]/],postprocess:function(a){var c=j(a,1)[0];return Number(c)}},{name:"integer_even$ebnf$1",symbols:[]},{name:"integer_even$ebnf$1",symbols:["integer_even$ebnf$1",/[0-9]/],postprocess:function(a){return a[0].concat([a[1]])}},{name:"integer_even",symbols:[/[1-9]/,"integer_even$ebnf$1",/[02468]/],postprocess:function(a){var c=j(a,3),r=c[0],o=c[1],s=c[2];return Number([r].concat(l(o),[s]).join(""))}},{name:"cross",symbols:[{literal:"x"}],postprocess:function(){return!0}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",{literal:" "}],postprocess:function(a){return a[0].concat([a[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(){return null}},{name:"standard_async$macrocall$2$macrocall$2$macrocall$2",symbols:["standard_async_toss"]},{name:"standard_async$macrocall$2$macrocall$2$macrocall$3",symbols:[{literal:","}]},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1",symbols:["standard_async$macrocall$2$macrocall$2$macrocall$2"],postprocess:d},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_async$macrocall$2$macrocall$2$macrocall$3","_","standard_async$macrocall$2$macrocall$2$macrocall$2"]},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["_","standard_async$macrocall$2$macrocall$2$macrocall$3","_","standard_async$macrocall$2$macrocall$2$macrocall$2"]},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1","standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_async$macrocall$2$macrocall$2$macrocall$1",symbols:[{literal:"["},"_","standard_async$macrocall$2$macrocall$2$macrocall$2","standard_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1","_",{literal:"]"}],postprocess:function(a){var c=j(a,4),r=j(c[2],1)[0],o=c[3];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_async$macrocall$2$macrocall$2",symbols:["standard_async$macrocall$2$macrocall$2$macrocall$1"]},{name:"standard_async$macrocall$2$macrocall$3",symbols:[{literal:","}]},{name:"standard_async$macrocall$2$macrocall$1$macrocall$2",symbols:["standard_async$macrocall$2$macrocall$2"]},{name:"standard_async$macrocall$2$macrocall$1$macrocall$3",symbols:["standard_async$macrocall$2$macrocall$3"]},{name:"standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_async$macrocall$2$macrocall$1$macrocall$3","_","standard_async$macrocall$2$macrocall$1$macrocall$2"]},{name:"standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1","standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_async$macrocall$2$macrocall$1$macrocall$1",symbols:["standard_async$macrocall$2$macrocall$1$macrocall$2","standard_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,2),r=j(c[0],1)[0],o=c[1];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_async$macrocall$2$macrocall$1",symbols:["standard_async$macrocall$2$macrocall$1$macrocall$1"],postprocess:d},{name:"standard_async$macrocall$2",symbols:["standard_async$macrocall$2$macrocall$1"]},{name:"standard_async$macrocall$1",symbols:["_","standard_async$macrocall$2","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"standard_async",symbols:["standard_async$macrocall$1"],postprocess:function(a){return p(j(a,1)[0])}},{name:"standard_async$macrocall$4$macrocall$2$macrocall$2",symbols:["standard_async_toss"]},{name:"standard_async$macrocall$4$macrocall$2$macrocall$3",symbols:[{literal:" "}]},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1",symbols:["standard_async$macrocall$4$macrocall$2$macrocall$2"],postprocess:d},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_async$macrocall$4$macrocall$2$macrocall$3","_","standard_async$macrocall$4$macrocall$2$macrocall$2"]},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["_","standard_async$macrocall$4$macrocall$2$macrocall$3","_","standard_async$macrocall$4$macrocall$2$macrocall$2"]},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1","standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_async$macrocall$4$macrocall$2$macrocall$1",symbols:[{literal:"["},"_","standard_async$macrocall$4$macrocall$2$macrocall$2","standard_async$macrocall$4$macrocall$2$macrocall$1$ebnf$1","_",{literal:"]"}],postprocess:function(a){var c=j(a,4),r=j(c[2],1)[0],o=c[3];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_async$macrocall$4$macrocall$2",symbols:["standard_async$macrocall$4$macrocall$2$macrocall$1"]},{name:"standard_async$macrocall$4$macrocall$3",symbols:[{literal:" "}]},{name:"standard_async$macrocall$4$macrocall$1$macrocall$2",symbols:["standard_async$macrocall$4$macrocall$2"]},{name:"standard_async$macrocall$4$macrocall$1$macrocall$3",symbols:["standard_async$macrocall$4$macrocall$3"]},{name:"standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_async$macrocall$4$macrocall$1$macrocall$3","_","standard_async$macrocall$4$macrocall$1$macrocall$2"]},{name:"standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1",symbols:["standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1","standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_async$macrocall$4$macrocall$1$macrocall$1",symbols:["standard_async$macrocall$4$macrocall$1$macrocall$2","standard_async$macrocall$4$macrocall$1$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,2),r=j(c[0],1)[0],o=c[1];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_async$macrocall$4$macrocall$1",symbols:["standard_async$macrocall$4$macrocall$1$macrocall$1"],postprocess:d},{name:"standard_async$macrocall$4",symbols:["standard_async$macrocall$4$macrocall$1"]},{name:"standard_async$macrocall$3",symbols:["_","standard_async$macrocall$4","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"standard_async",symbols:["standard_async$macrocall$3"],postprocess:function(a){return p(j(a,1)[0])}},{name:"standard_async_toss",symbols:["integer"],postprocess:function(a){return{value:j(a,1)[0]}}},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$2",symbols:["standard_sync_toss"]},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$3",symbols:[{literal:","}]},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1",symbols:["standard_sync$macrocall$2$macrocall$2$macrocall$2"],postprocess:d},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_sync$macrocall$2$macrocall$2$macrocall$3","_","standard_sync$macrocall$2$macrocall$2$macrocall$2"]},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["_","standard_sync$macrocall$2$macrocall$2$macrocall$3","_","standard_sync$macrocall$2$macrocall$2$macrocall$2"]},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1","standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_sync$macrocall$2$macrocall$2$macrocall$1",symbols:[{literal:"["},"_","standard_sync$macrocall$2$macrocall$2$macrocall$2","standard_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1","_",{literal:"]"}],postprocess:function(a){var c=j(a,4),r=j(c[2],1)[0],o=c[3];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_sync$macrocall$2$macrocall$2",symbols:["standard_sync$macrocall$2$macrocall$2$macrocall$1"]},{name:"standard_sync$macrocall$2$macrocall$3",symbols:[{literal:","}]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$2",symbols:["standard_sync$macrocall$2$macrocall$2"]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$3",symbols:["standard_sync$macrocall$2$macrocall$3"]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$1",symbols:[{literal:"("},"_","standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$2","_","standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$3","_","standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$2","_",{literal:")"}],postprocess:function(a){var c=j(a,7),r=j(c[2],1),l=j(r[0],1)[0],o=j(c[6],1);return[l,j(o[0],1)[0]]}},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$2",symbols:["standard_sync$macrocall$2$macrocall$1$macrocall$2$macrocall$1"]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$3",symbols:["_"]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:["standard_sync$macrocall$2$macrocall$1$macrocall$3","standard_sync$macrocall$2$macrocall$1$macrocall$2"]},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1","standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_sync$macrocall$2$macrocall$1$macrocall$1",symbols:["standard_sync$macrocall$2$macrocall$1$macrocall$2","standard_sync$macrocall$2$macrocall$1$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,2),r=j(c[0],1)[0],o=c[1];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"standard_sync$macrocall$2$macrocall$1$ebnf$1",symbols:[{literal:"*"}],postprocess:d},{name:"standard_sync$macrocall$2$macrocall$1$ebnf$1",symbols:[],postprocess:function(a){return null}},{name:"standard_sync$macrocall$2$macrocall$1",symbols:["standard_sync$macrocall$2$macrocall$1$macrocall$1","_","standard_sync$macrocall$2$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,3),r=c[0];return c[2]?y(r):r}},{name:"standard_sync$macrocall$2",symbols:["standard_sync$macrocall$2$macrocall$1"]},{name:"standard_sync$macrocall$1",symbols:["_","standard_sync$macrocall$2","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"standard_sync",symbols:["standard_sync$macrocall$1"],postprocess:function(a){return f(j(a,1)[0])}},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$2",symbols:["standard_sync_toss"]},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$3",symbols:[{literal:" "}]},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1",symbols:["standard_sync$macrocall$4$macrocall$2$macrocall$2"],postprocess:d},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["_","standard_sync$macrocall$4$macrocall$2$macrocall$3","_","standard_sync$macrocall$4$macrocall$2$macrocall$2"]},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["_","standard_sync$macrocall$4$macrocall$2$macrocall$3","_","standard_sync$macrocall$4$macrocall$2$macrocall$2"]},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1","standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_sync$macrocall$4$macrocall$2$macrocall$1",symbols:[{literal:"["},"_","standard_sync$macrocall$4$macrocall$2$macrocall$2","standard_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1","_",{literal:"]"}],postprocess:function(a){var c=j(a,4),r=j(c[2],1)[0],o=c[3];return[r].concat(l(o.map(function(a){var c=j(a,4);return j(c[3],1)[0]})))}},{name:"standard_sync$macrocall$4$macrocall$2",symbols:["standard_sync$macrocall$4$macrocall$2$macrocall$1"]},{name:"standard_sync$macrocall$4$macrocall$3",symbols:[{literal:" "}]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$2",symbols:["standard_sync$macrocall$4$macrocall$2"]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$3",symbols:["standard_sync$macrocall$4$macrocall$3"]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$1",symbols:[{literal:"("},"_","standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$2","_","standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$3","_","standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$2","_",{literal:")"}],postprocess:function(a){var c=j(a,7),r=j(c[2],1),l=j(r[0],1)[0],o=j(c[6],1);return[l,j(o[0],1)[0]]}},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$2",symbols:["standard_sync$macrocall$4$macrocall$1$macrocall$2$macrocall$1"]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$3",symbols:["_"]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:["standard_sync$macrocall$4$macrocall$1$macrocall$3","standard_sync$macrocall$4$macrocall$1$macrocall$2"]},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1",symbols:["standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1","standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"standard_sync$macrocall$4$macrocall$1$macrocall$1",symbols:["standard_sync$macrocall$4$macrocall$1$macrocall$2","standard_sync$macrocall$4$macrocall$1$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,2),r=j(c[0],1)[0],o=c[1];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"standard_sync$macrocall$4$macrocall$1$ebnf$1",symbols:[{literal:"*"}],postprocess:d},{name:"standard_sync$macrocall$4$macrocall$1$ebnf$1",symbols:[],postprocess:function(a){return null}},{name:"standard_sync$macrocall$4$macrocall$1",symbols:["standard_sync$macrocall$4$macrocall$1$macrocall$1","_","standard_sync$macrocall$4$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,3),r=c[0];return c[2]?y(r):r}},{name:"standard_sync$macrocall$4",symbols:["standard_sync$macrocall$4$macrocall$1"]},{name:"standard_sync$macrocall$3",symbols:["_","standard_sync$macrocall$4","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"standard_sync",symbols:["standard_sync$macrocall$3"],postprocess:function(a){return f(j(a,1)[0])}},{name:"standard_sync_toss$ebnf$1",symbols:["cross"],postprocess:d},{name:"standard_sync_toss$ebnf$1",symbols:[],postprocess:function(a){return null}},{name:"standard_sync_toss",symbols:["integer_even","standard_sync_toss$ebnf$1"],postprocess:function(a){var c=j(a,2);return{value:c[0],cross:!!c[1]}}},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$2",symbols:["compressed_async_toss"]},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$3",symbols:[]},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$2"],postprocess:d},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$3","compressed_async$macrocall$2$macrocall$2$macrocall$2"]},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$3","compressed_async$macrocall$2$macrocall$2$macrocall$2"]},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1","compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_async$macrocall$2$macrocall$2$macrocall$1",symbols:[{literal:"["},"compressed_async$macrocall$2$macrocall$2$macrocall$2","compressed_async$macrocall$2$macrocall$2$macrocall$1$ebnf$1",{literal:"]"}],postprocess:function(a){var c=j(a,3),r=j(c[1],1)[0],o=c[2];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"compressed_async$macrocall$2$macrocall$2",symbols:["compressed_async$macrocall$2$macrocall$2$macrocall$1"]},{name:"compressed_async$macrocall$2$macrocall$3",symbols:[]},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$2",symbols:["compressed_async$macrocall$2$macrocall$2"]},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$3",symbols:["compressed_async$macrocall$2$macrocall$3"]},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:["compressed_async$macrocall$2$macrocall$1$macrocall$3","compressed_async$macrocall$2$macrocall$1$macrocall$2"]},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1",symbols:["compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1","compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_async$macrocall$2$macrocall$1$macrocall$1",symbols:["compressed_async$macrocall$2$macrocall$1$macrocall$2","compressed_async$macrocall$2$macrocall$1$macrocall$1$ebnf$1"],postprocess:function(a){var c=j(a,2),r=j(c[0],1)[0],o=c[1];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"compressed_async$macrocall$2$macrocall$1",symbols:["compressed_async$macrocall$2$macrocall$1$macrocall$1"],postprocess:d},{name:"compressed_async$macrocall$2",symbols:["compressed_async$macrocall$2$macrocall$1"]},{name:"compressed_async$macrocall$1",symbols:["_","compressed_async$macrocall$2","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"compressed_async",symbols:["compressed_async$macrocall$1"],postprocess:function(a){return p(j(a,1)[0])}},{name:"compressed_async_toss",symbols:["digit"],postprocess:function(a){return{value:j(a,1)[0]}}},{name:"compressed_async_toss",symbols:["letter"],postprocess:function(a){return{value:u(j(a,1)[0])}}},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$2",symbols:["compressed_sync_toss"]},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$3",symbols:[]},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$2"],postprocess:d},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$3","compressed_sync$macrocall$2$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$3","compressed_sync$macrocall$2$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1","compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_sync$macrocall$2$macrocall$2$macrocall$1",symbols:[{literal:"["},"compressed_sync$macrocall$2$macrocall$2$macrocall$2","compressed_sync$macrocall$2$macrocall$2$macrocall$1$ebnf$1",{literal:"]"}],postprocess:function(a){var c=j(a,3),r=j(c[1],1)[0],o=c[2];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"compressed_sync$macrocall$2$macrocall$2",symbols:["compressed_sync$macrocall$2$macrocall$2$macrocall$1"]},{name:"compressed_sync$macrocall$2$macrocall$3",symbols:[{literal:","}]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$2",symbols:["compressed_sync$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$3",symbols:["compressed_sync$macrocall$2$macrocall$3"]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$1",symbols:[{literal:"("},"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$2","compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$3","compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$2",{literal:")"}],postprocess:function(a){var c=j(a,4),r=j(c[1],1),l=j(r[0],1)[0],o=j(c[3],1);return[l,j(o[0],1)[0]]}},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$1"]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$5",symbols:["compressed_sync$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$6",symbols:["compressed_sync$macrocall$2$macrocall$3"]},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$4",symbols:[{literal:"("},"compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$5","compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$6","compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$5",{literal:")"}],postprocess:function(a){var c=j(a,4),r=j(c[1],1),l=j(r[0],1)[0],o=j(c[3],1);return[l,j(o[0],1)[0]]}},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$2$macrocall$1$ebnf$1","compressed_sync$macrocall$2$macrocall$1$ebnf$1$macrocall$4"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$2",symbols:[{literal:"*"}],postprocess:d},{name:"compressed_sync$macrocall$2$macrocall$1$ebnf$2",symbols:[],postprocess:function(a){return null}},{name:"compressed_sync$macrocall$2$macrocall$1",symbols:["compressed_sync$macrocall$2$macrocall$1$ebnf$1","compressed_sync$macrocall$2$macrocall$1$ebnf$2"],postprocess:function(a){var c=j(a,2),r=c[0];return c[1]?y(r):r}},{name:"compressed_sync$macrocall$2",symbols:["compressed_sync$macrocall$2$macrocall$1"]},{name:"compressed_sync$macrocall$1",symbols:["_","compressed_sync$macrocall$2","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"compressed_sync",symbols:["compressed_sync$macrocall$1"],postprocess:function(a){return f(j(a,1)[0])}},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$2",symbols:["compressed_sync_toss"]},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$3",symbols:[]},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$2"],postprocess:d},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$3","compressed_sync$macrocall$4$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$1"]},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$3","compressed_sync$macrocall$4$macrocall$2$macrocall$2"]},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1","compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1$subexpression$2"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_sync$macrocall$4$macrocall$2$macrocall$1",symbols:[{literal:"["},"compressed_sync$macrocall$4$macrocall$2$macrocall$2","compressed_sync$macrocall$4$macrocall$2$macrocall$1$ebnf$1",{literal:"]"}],postprocess:function(a){var c=j(a,3),r=j(c[1],1)[0],o=c[2];return[r].concat(l(o.map(function(a){var c=j(a,2);return j(c[1],1)[0]})))}},{name:"compressed_sync$macrocall$4$macrocall$2",symbols:["compressed_sync$macrocall$4$macrocall$2$macrocall$1"]},{name:"compressed_sync$macrocall$4$macrocall$3",symbols:[]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$2",symbols:["compressed_sync$macrocall$4$macrocall$2"]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$3",symbols:["compressed_sync$macrocall$4$macrocall$3"]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$1",symbols:[{literal:"("},"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$2","compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$3","compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$2",{literal:")"}],postprocess:function(a){var c=j(a,4),r=j(c[1],1),l=j(r[0],1)[0],o=j(c[3],1);return[l,j(o[0],1)[0]]}},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$1"]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$5",symbols:["compressed_sync$macrocall$4$macrocall$2"]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$6",symbols:["compressed_sync$macrocall$4$macrocall$3"]},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$4",symbols:[{literal:"("},"compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$5","compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$6","compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$5",{literal:")"}],postprocess:function(a){var c=j(a,4),r=j(c[1],1),l=j(r[0],1)[0],o=j(c[3],1);return[l,j(o[0],1)[0]]}},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$1",symbols:["compressed_sync$macrocall$4$macrocall$1$ebnf$1","compressed_sync$macrocall$4$macrocall$1$ebnf$1$macrocall$4"],postprocess:function(a){return a[0].concat([a[1]])}},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$2",symbols:[{literal:"*"}],postprocess:d},{name:"compressed_sync$macrocall$4$macrocall$1$ebnf$2",symbols:[],postprocess:function(a){return null}},{name:"compressed_sync$macrocall$4$macrocall$1",symbols:["compressed_sync$macrocall$4$macrocall$1$ebnf$1","compressed_sync$macrocall$4$macrocall$1$ebnf$2"],postprocess:function(a){var c=j(a,2),r=c[0];return c[1]?y(r):r}},{name:"compressed_sync$macrocall$4",symbols:["compressed_sync$macrocall$4$macrocall$1"]},{name:"compressed_sync$macrocall$3",symbols:["_","compressed_sync$macrocall$4","_"],postprocess:function(a){var c=j(a,2);return j(c[1],1)[0]}},{name:"compressed_sync",symbols:["compressed_sync$macrocall$3"],postprocess:function(a){return f(j(a,1)[0])}},{name:"compressed_sync_toss$ebnf$1",symbols:["cross"],postprocess:d},{name:"compressed_sync_toss$ebnf$1",symbols:[],postprocess:function(a){return null}},{name:"compressed_sync_toss",symbols:["digit_even","compressed_sync_toss$ebnf$1"],postprocess:function(a){var c=j(a,2);return{value:c[0],cross:!!c[1]}}},{name:"compressed_sync_toss$ebnf$2",symbols:["cross"],postprocess:d},{name:"compressed_sync_toss$ebnf$2",symbols:[],postprocess:function(a){return null}},{name:"compressed_sync_toss",symbols:["letter_even","compressed_sync_toss$ebnf$2"],postprocess:function(a){var c=j(a,2),r=c[0],l=c[1];return{value:u(r),cross:!!l}}}],ParserStart:"digit"},T={"standard:async":{limits:{degree:{min:1,max:1}},hands:function(){return["Hand"]},parse:h.bind(null,"standard_async"),unparse:function(a){return a.map(function(a){var c=j(a,1)[0];return 1===c.length?c[0].value:"["+c.map(function(a){return a.value}).join(",")+"]"}).join(",")}},"standard:sync":{limits:{degree:{min:2,max:2}},hands:function(){return["Left","Right"]},parse:h.bind(null,"standard_sync"),unparse:function(a){return a.map(function(a){return"("+a.map(function(a){return 1===a.length?b(a[0]):"["+a.map(b).join(",")+"]"})+")"}).join("")}},standard:["standard:async","standard:sync"],"compressed:async":{limits:{degree:{min:1,max:1},greatestValue:{max:61}},hands:function(){return["Hand"]},parse:h.bind(null,"compressed_async"),unparse:function(a){return a.map(function(a){var c=j(a,1)[0];return 1===c.length?c[0].value:"["+c.map(function(a){return a.value}).join("")+"]"}).join("")}},"compressed:sync":{limits:{degree:{min:2,max:2},greatestValue:{max:61}},hands:function(){return["Left","Right"]},parse:h.bind(null,"compressed_sync"),unparse:function(a){return a.map(function(a){return"("+a.map(function(a){return 1===a.length?_(a[0]):"["+a.map(_).join("")+"]"})+")"}).join("")}},compressed:["compressed:async","compressed:sync"]},Juggle=function Juggle(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"compressed";r(this,Juggle);try{var o=this.parse(a,[].concat(c)),s=o.throws,n=o.notation,$=s.reduce(function(a,c){return a.concat.apply(a,l(c.map(function(a){return a.map(function(a){return a.value})})))},[]);this.notation=n,this.valid=!0,this.throws=s,this.degree=s[0].length,this.props=$.reduce(function(a,c){return a+c},0)/s.length,this.multiplex=s.reduce(function(a,c){return Math.max.apply(Math,[a].concat(l(c.map(function(a){return a.length}))))},0),this.greatestValue=Math.max.apply(Math,l($))}catch(a){this.valid=!1,this.notation=c,this.error=a.message}};Juggle.prototype.parse=function(a,c){if((c=c.reduce(function(a,c){return a.concat(Array.isArray(T[c])?T[c]:c)},[])).some(function(a){return"string"!=typeof a||!T[a]}))throw new Error("Unsupported notation.");if("object"===(void 0===a?"undefined":S(a))){if(!v(a)||c.length>1)throw new Error("Invalid input.");return{notation:c[0],throws:a}}var r=!0,l=!1,o=void 0;try{for(var s,n=c[Symbol.iterator]();!(r=(s=n.next()).done);r=!0){var $=s.value,e=T[$].parse(a),t=j(e,1)[0];if(t&&v(t))return{notation:$,throws:t}}}catch(a){l=!0,o=a}finally{try{!r&&n.return&&n.return()}finally{if(l)throw o}}throw new Error("Invalid syntax.")},Juggle.prototype.toString=function(){var a=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.notation;if(!this.valid)throw new Error("Invalid siteswap.");if(!T[c])throw new Error("Unsupported notation.");if(this.notation!==c){var r=T[this.notation].limits||{},l=T[c].limits||{},o=Object.keys(l);if(o.some(function(a){return l[a].min>r[a].max||l[a].max<r[a].min}))throw new Error("Incompatible notations.");if(o.some(function(c){return a[c]>l[c].max||a[c]<l[c].min}))throw new Error("This siteswap can't be converted to the target notation.")}return T[c].unparse(this.throws)};var Transition=function(l){function Transition(c,l,o,s){var n;r(this,Transition);var $=a(this,(Transition.__proto__||Object.getPrototypeOf(Transition)).call(this,c,l));return $.valid?($.stateFrom=o,$.stateTo=s,$):(n=$,a($,n))}return c(Transition,Juggle),Transition}(),Siteswap=function(l){function Siteswap(c,l){var o;r(this,Siteswap);var s=a(this,(Siteswap.__proto__||Object.getPrototypeOf(Siteswap)).call(this,c,l));if(!s.valid)return o=s,a(s,o);try{s.validate(s.throws),s.valid=!0}catch(c){var n,$=Object.keys(s),e=!0,t=!1,m=void 0;try{for(var i,d=$[Symbol.iterator]();!(e=(i=d.next()).done);e=!0){var y=i.value;delete s[y]}}catch(a){t=!0,m=a}finally{try{!e&&d.return&&d.return()}finally{if(t)throw m}}return s.valid=!1,s.notation=l,s.error=c.message,n=s,a(s,n)}return s.truncate(s.throws),s.states=s.schedulise(s.throws,!1),s.strictStates=s.schedulise(s.throws,!0),s.orbits=s.orbitise(s.throws,s.notation),s.composition=s.decompose(s.states,s.throws,s.notation),s.period=s.states.length,s.fullPeriod=s.strictStates.length,s.prime=1===s.composition.length,s.groundState=s.excitify(),s}return c(Siteswap,Juggle),Siteswap}();Siteswap.prototype.validate=function(a){for(var c=a.map(function(a){return a.map(function(a){return 0})}),r=0;r<a.length;r++){var l=a[r],o=!0,s=!1,n=void 0;try{for(var $,e=l[Symbol.iterator]();!(o=($=e.next()).done);o=!0){var t=$.value,m=!0,i=!1,d=void 0;try{for(var y,u=t[Symbol.iterator]();!(m=(y=u.next()).done);m=!0){var p=y.value;c[r][p.handFrom]++,c[(r+p.value)%a.length][p.handTo]--}}catch(a){i=!0,d=a}finally{try{!m&&u.return&&u.return()}finally{if(i)throw d}}}}catch(a){s=!0,n=a}finally{try{!o&&e.return&&e.return()}finally{if(s)throw n}}}if(c.some(function(a){return a.some(function(a){return 0!==a})}))throw new Error("Invalid siteswap.")},Siteswap.prototype.truncate=function(a){for(var c=1,r=Math.floor(a.length/2);c<=r;c++)if(a.length%c==0)for(var l=a.slice(0,c),s=c;s<a.length&&o(l,a.slice(s,s+c));s+=c)if(c+s===a.length)return a.length=c,a},Siteswap.prototype.schedulise=function(a,c){var r=[new State(this,c)];do{var l=!0,o=!1,s=void 0;try{for(var n,$=a[Symbol.iterator]();!(l=(n=$.next()).done);l=!0){var e=n.value;r.push(r[r.length-1].advance(e))}}catch(a){o=!0,s=a}finally{try{!l&&$.return&&$.return()}finally{if(o)throw s}}}while(!r[0].equals(r[r.length-1]));return r.pop(),r},Siteswap.prototype.excitify=function(){return this.states.some(function(a){return a.ground})},Siteswap.prototype.orbitise=function(a,c){for(var r=[],l=a.map(function(a){return a.map(function(a){return null})}),o=0;o<a.length;o++)for(var n=a[o],$=0;$<n.length;$++){var e=n[$];if(null===l[o][$]&&(1!==e.length||0!==e[0].value)){var t=[];s(t,l,a,o,$),r.push(t)}}if(1===r.length)return[this];for(var m=0;m<a.length;m++)!function(c){var o=a[c],s=!0,n=!1,$=void 0;try{for(var e,t=r[Symbol.iterator]();!(s=(e=t.next()).done);s=!0)!function(a){a.push(o.map(function(r,o){return l[c][o]===a?r:[new Toss(0,null,null)]}))}(e.value)}catch(a){n=!0,$=a}finally{try{!s&&t.return&&t.return()}finally{if(n)throw $}}}(m);return r.map(function(a){return new Siteswap(a,c)})},Siteswap.prototype.decompose=function(a,c,r){for(var l=[],o=0,s=1;s<=a.length;s++)for(var n=s-1;n>=o;n--)if(a[s%a.length].equals(a[n])){if(0===n&&s===a.length)return[this];n>o&&l.push(new Transition(c.slice(o,n),r,a[o],a[n])),l.push(new Siteswap(c.slice(n,s),r)),o=s;break}return o!==a.length&&l.push(new Transition(c.slice(o),r)),l},Siteswap.prototype.log=function(){var a=this;if(this.valid){var c=[],r=void 0;if(c.push("siteswap\n "+this.toString().replace(/\n/g,"\n ")),c.push("notation\n "+this.notation),c.push("degree\n "+this.degree),c.push("props\n "+this.props),c.push("period\n "+this.period),c.push("full period\n "+this.fullPeriod),c.push("multiplex\n "+this.multiplex),c.push("prime\n "+this.prime),c.push("ground state\n "+this.groundState),this.degree>2){r=g(this.degree),c.push("hand labels");var o=T[this.notation].hands(this.degree),s=[];s.push(this.degree.toString().length+1),s.push(Math.max.apply(Math,l(o.map(function(a){return a.length})))),s.push(Math.max.apply(Math,l(r.map(function(a){return a.length}))));for(var n=0;n<this.degree;n++){var $=w(n+1,s[0]),e=w(r[n],s[2]),t=w(o[n],s[1]);c.push($+"| "+e+("multihand"!==this.notation?" ("+t+")":""))}}c.push("throw sequence");var m=[],i=!0,d=!1,y=void 0;try{for(var u,p=this.throws.entries()[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var f=u.value,h=j(f,2),b=h[0],_=h[1].map(function(c){var l=void 0;return l=a.degree<=2?c.map(function(a){return a.value+(a.handFrom!==a.handTo?"x":"")}).join(","):c.map(function(a){var c=a.value,l=(a.handFrom,a.handTo);return""+c+r[l]}).join(","),1===c.length?l:"["+l+"]"});m.push([b+1+"|"].concat(l(_)))}}catch(a){d=!0,y=a}finally{try{!i&&p.return&&p.return()}finally{if(d)throw y}}for(var v=[],x=0;x<m[0].length;x++)!function(a){v.push(Math.max.apply(Math,l(m.map(function(c){return c[a].length+1}))))}(x);c.push.apply(c,l(m.map(function(a){return a.map(function(a,c){return w(a,v[c])}).join("")}))),c.push("states");var S=this.period.toString().length+1,A=!0,E=!1,k=void 0;try{for(var O,C=this.states.entries()[Symbol.iterator]();!(A=(O=C.next()).done);A=!0){var P=O.value,M=j(P,2),F=M[0],I=M[1],N=!0,L=!1,B=void 0;try{for(var H,R=I.schedule.entries()[Symbol.iterator]();!(N=(H=R.next()).done);N=!0){var q=H.value,U=j(q,2),V=U[0],J=U[1];c.push(w(V?" ":F+1,S)+"| ["+J.join(",")+"]")}}catch(a){L=!0,B=a}finally{try{!N&&R.return&&R.return()}finally{if(L)throw B}}}}catch(a){E=!0,k=a}finally{try{!A&&C.return&&C.return()}finally{if(E)throw k}}c.push("strict states");var Z=this.fullPeriod.toString().length+1,z=!0,G=!1,K=void 0;try{for(var Q,W=this.strictStates.entries()[Symbol.iterator]();!(z=(Q=W.next()).done);z=!0){var Y=Q.value,D=j(Y,2),X=D[0],aa=D[1],ca=!0,ra=!1,la=void 0;try{for(var oa,sa=aa.schedule.entries()[Symbol.iterator]();!(ca=(oa=sa.next()).done);ca=!0){var na=oa.value,$a=j(na,2),ea=$a[0],ta=$a[1];c.push(w(ea?"":X+1,Z)+"| ["+ta.map(function(a){return"["+(a.length?a.join(","):"-")+"]"}).join(",")+"]")}}catch(a){ra=!0,la=a}finally{try{!ca&&sa.return&&sa.return()}finally{if(ra)throw la}}}}catch(a){G=!0,K=a}finally{try{!z&&W.return&&W.return()}finally{if(G)throw K}}c.push("orbits"),function(){var r=a.orbits.length.toString().length+1,o=!0,s=!1,n=void 0;try{for(var $,e=a.orbits.entries()[Symbol.iterator]();!(o=($=e.next()).done);o=!0){var t=$.value,m=j(t,2),i=m[0];!function(a,o){c.push.apply(c,l(a.toString().split("\n").map(function(a,c){return w(c?"":o+1,r)+"| "+a})))}(m[1],i)}}catch(a){s=!0,n=a}finally{try{!o&&e.return&&e.return()}finally{if(s)throw n}}}(),c.push("composition"),function(){var r=a.composition.length.toString().length+1,o=!0,s=!1,n=void 0;try{for(var $,e=a.composition.entries()[Symbol.iterator]();!(o=($=e.next()).done);o=!0){var t=$.value,m=j(t,2),i=m[0];!function(a,o){c.push.apply(c,l(a.toString().split("\n").map(function(a,c){return w(c?"":o+1,r)+"| "+a})))}(m[1],i)}}catch(a){s=!0,n=a}finally{try{!o&&e.return&&e.return()}finally{if(s)throw n}}}(),c.push(" "),console.log(c.join("\n"))}else console.log("Invalid siteswap.")},module.exports=Siteswap;
return module.exports;});